<div id="map" style="height:600px;"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-rotatedmarker/leaflet.rotatedMarker.js"></script>

<script>
const API_KEY = "EC5j4KH1v6QNhTVlcCRZ2dvhQgXccMf5";

const map = L.map('map').setView([39, 35], 6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap'
}).addTo(map);

let markers = {};
let sessionId = null;

// Expert Server ID al
async function getSession() {
    const res = await fetch(
        `https://api.infiniteflight.com/public/v2/sessions?apikey=${API_KEY}`
    );
    const data = await res.json();
    const expert = data.result.find(s => s.name === "Expert Server");
    sessionId = expert.id;
}

// Uçuşları çek
async function fetchFlights() {
    if (!sessionId) return;

    const res = await fetch(
        `https://api.infiniteflight.com/public/v2/sessions/${sessionId}/flights?api
